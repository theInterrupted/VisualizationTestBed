<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<meta name="description" content="This is a test.">
		<meta name="author" content="theInterrupted">
		<title>Ready Player One!</title>
		<link rel="stylesheet" href="css/bootstrap.min.css" />
		<link rel="stylesheet" href="css/bootstrap-theme.min.css" />
		<link rel="stylesheet" href="css/theme.css" />
		<link rel="stylesheet" href="css/globe.css" />
	</head>
	<body role="document">
		<!-- Fixed navbar -->
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Ready User One</a>
				</div>
			<div id="navbar" class="navbar-collapse collapse">
				<ul class="nav navbar-nav">
					<li><a href="#home">Home</a></li>
					<li class="active"><a href="#new">New</a></li>
					<li><a href="#save">Save</a></li>
					<li><a href="#load">Load</a></li>
					<li><a href="#contact">Contact</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> Options <span class="caret"></span></a>
						<ul class="dropdown-menu" id="dropmenu">
							<li id="reset-init"><a href="#">Reset Selections</a></li>
							<li id="expand-init"><a href="#">Expand All</a></li>
							<li id="collapse-init"><a href="#">Collapse All</a></li>
							<li role="separator" class="divider"></li>
							<li class="dropdown-header">View</li>
							<li id="resetzoom"><a href="#">Reset Zoom</a></li>
							<li id="centertree"><a href="#">Center Tree</a></li>
						</ul>
					</li>
				</ul>
			</div><!--/.nav-collapse -->
		  </div>
		</nav>
		<div>
			<ol class="summary">
				<li id="charname">
					<label for="cname">Character Name:</label>
					<input type="text" class="form-control" id="cname">
				</li>
				<li id="erdovan"></li>
				<li id="archetype"></li>
				<li id="homeland"></li>
				<li id="archetype"></li>
			</ol>
		</div>
		<div class="builder-menu">	  
			<div class="panel-group" id="accordion">
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="setViewerImage()">Erdovan</a>
						</h4>
					</div>
					<div id="collapseOne" class="panel-collapse collapse in">
						<div class="panel-body">
							<div class="panel-group" id="accordion2">
								<div class="panel panel-secondary">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse" data-parent="#accordion2" href="#collapseA">Alpin</a>
										</h4>
									</div>
									<div id="collapseA" class="panel-collapse collapse in">
										<div class="panel-body">
											<div class="alpin-details"></div>
											<button type="button" class="btn btn-default btn-block" onclick="pickalpin()">Select</button>
										</div>
									</div>
								</div>
								<div class="panel panel-secondary">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse" data-parent="#accordion2" href="#collapseB">Exomer</a>
										</h4>
									</div>
									<div id="collapseB" class="panel-collapse collapse">
										<div class="panel-body">
											<div class="exomer-details"></div>
											<button type="button" class="btn btn-default btn-block" onclick="pickexomer()">Select</button>
										</div>
									</div>
								</div>
								<div class="panel panel-secondary">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse" data-parent="#accordion2" href="#collapseC">Nephoros</a>
										</h4>
									</div>
									<div id="collapseC" class="panel-collapse collapse">
										<div class="panel-body">
											<div class="nephoros-details"></div>
											<button type="button" class="btn btn-default btn-block" onclick="picknephoros()">Select</button>
										</div>
									</div>
								</div>
								<div class="panel panel-secondary">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse" data-parent="#accordion2" href="#collapseD">Sylvan</a>
										</h4>
									</div>
									<div id="collapseD" class="panel-collapse collapse">
										<div class="panel-body">
											<div class="sylvan-details"></div>
											<button type="button" class="btn btn-default btn-block" onclick="picksylvan()">Select</button>
										</div>
									</div>
								</div>
								<div class="panel panel-secondary">
									<div class="panel-heading">
										<h4 class="panel-title">
											<a data-toggle="collapse" data-parent="#accordion2" href="#collapseE">Zavon</a>
										</h4>
									</div>
									<div id="collapseE" class="panel-collapse collapse">
										<div class="panel-body">
											<div class="zavon-details"></div>
											<button type="button" class="btn btn-default btn-block" onclick="pickzavon()">Select</button>
										</div>
									</div>
								</div>
							  </div>
						</div>
					</div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="setViewerImage()">Archetype</a>
						</h4>
					</div>
					<div id="collapseTwo" class="panel-collapse collapse">
						<div class="panel-body">
							<p>Archetype accordion</p>
						</div>
					</div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" onclick="setViewerGlobe()">Homeland</a>
						</h4>
					</div>
					<div id="collapseThree" class="panel-collapse collapse">
						<div class="panel-body">
							<p>Homeland accordian</p>
						</div>
					</div>
				</div>
				<div class="panel panel-primary">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#accordion" href="#collapseFour" onclick="setViewerImage()">Trade</a>
						</h4>
					</div>
					<div id="collapseFour" class="panel-collapse collapse">
						<div class="panel-body">
							<p>Trade accordian</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="builder-viz">
			<div id="imageviewer"></div>
			<div id="modelviewer"></div>
			<div id="traits"></div>
			<div id="raceabilities"></div>
			<div id="archabilities"></div>
			<div id="homeabilities"></div>
			<div id="tradeabilities"></div>
		</div>
		
		<script src="js/jquery-2.1.4.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/d3.v3.js"></script>
		<script src="js/queue.v1.min.js"></script>
		<script src="js/topojson.v0.min.js"></script>
		<script src="js/globe.js"></script>
		
		<script>
			// End goal:
			//	Race selection picks the model
			//	Archetype selection picks model's pose
			//	Homeland selection picks model's background
			//	Trade selection picks model's apparel and gear
			
			var racedata;
			var archdata;
			var homedata;
			var tradedata;
			
			var myRace = "";
			var myPic = "";
			var myArch = "";
			var myHome = "";
			var myTrade = "";
			var myModel = "";
			
			$.getJSON("datafiles/briarwood/races.json", function(data){
				racedata = data.races;
				$.each(racedata, function(index, r){
					$("." + r.name + "-details")
						.html(r.description);
				})
			})
		
			function pickalpin(){
				pickedErdovan("Alpin", "face1.png");
			};
			function pickexomer(){
				pickedErdovan("Exomer", "face2.png");
			};
			function picknephoros(){
				pickedErdovan("Nephoros", "face3.png");
			};
			function picksylvan(){
				pickedErdovan("Sylvan", "face1.png");
			};
			function pickzavon(){
				pickedErdovan("Zavon", "face2.png");
			};
			
			function pickedErdovan(name, image){
				myRace = name;
				myPic = image;
				setName(name);
				setViewerImage(image);
			}
			
			function pickedArchetype(name){
				console.log(name);
				$("#archetype").text(name);
			}
			
			function pickedHomeland(name){
				console.log(name);
				$("#homeland").text(name);
			}
			
			function pickedTrade(name){
				console.log(name);
				$("#trade").text(name);
			}
			
			function setName(name){
				$("#erdovan").text(name);
			}
			
			function setViewerImage(image){
				console.log("View image");
				d3.select("#modelviewer").select("svg")
					.attr("height", 0);
				$("#imageviewer").height(500);
				if (typeof image !== "undefined"){
					$("#imageviewer").html("<img src=\"datafiles/briarwood/" + image + "\" alt=\"image\"/>");
				}
			}
			
			function setViewerGlobe(){
				console.log("View globe");
				$("#imageviewer").height(0);
				d3.select("#modelviewer").select("svg")
					.attr("height", 500);
			}
			
			// Just to kick this off
			pickalpin();
		</script>
	</body>
</html>
